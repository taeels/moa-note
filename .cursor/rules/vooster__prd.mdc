---
description:
globs:
alwaysApply: true
---
# 제품 요구사항 문서 (PRD)

## 1. 개요
시스템 엔지니어 7명으로 구성된 팀이 한 주 동안 Gerrit에 푸시한 커밋들을 인원별로 자동 클러스터링·요약해 30초 이내로 읽을 수 있는 주간 다이제스트 웹페이지를 제공한다. 요약은 AI가 2~3문장으로 핵심 변경점을 전달해 오프라인 코드리뷰 전 빠른 사전 이해를 돕는다.

## 2. 문제 정의
- 서로 다른 모듈을 담당해 패치 배경 설명에 리뷰 시간이 과다 소요  
- 기존 Gerrit UI는 변경 이력을 한눈에 파악하기 어려움  
- 주간 단위로 변경 내용을 정리·확산할 수단 부재

## 3. 목표 및 목적
- 1차 목표: 30초 내 읽을 수 있는 인원별 주간 다이제스트 자동 생성  
- 부차 목표: 이메일·Excel 내보내기, 과거 기록 보관, 클릭 한 번 재생성  
- 성공 지표  
  - 주간 다이제스트 열람률 ≥ 90%  
  - 오프라인 코드리뷰 시간 20% 단축  
  - 요약 만족도(설문) ≥ 4/5  

## 4. 타깃 사용자
### 주요 사용자
- 시스템 소프트웨어 개발자(리눅스 커널, 펌웨어, LK 등)  
- Gerrit 사용 경험 보유, CLI 선호, 시간 압박 높음
### 이해관계자
- 팀 리드: 리뷰 효율 향상  
- DevOps: 시스템 유지·배포  

## 5. 사용자 스토리
- 개발자로서, 한 주 내 내가 올린 패치를 2문장으로 요약받아 리뷰 준비 시간을 절약하고 싶다.  
- 팀원으로서, 동료들의 변경사항을 빠르게 훑어보고 관련 이슈를 미리 파악하고 싶다.  
- 팀 리드로서, 팀 전체 변경 트렌드를 파악해 리소스 배분 결정을 빠르게 내리고 싶다.  

## 6. 기능 요구사항
### 핵심 기능
1. Gerrit 통합
   - 주 단위(월~일) 사용자별 커밋 리스트 수집
   - 필터: 프로젝트/브랜치 선택  
   - 승인 상태(merged, open 등) 표시
2. 커밋 클러스터링
   - 동일 토픽/파일 경로·메시지 유사도 기반 그룹화  
   - 그룹화 실패 시 단일 커밋으로 처리
   - 수락 기준: 90% 이상 관련도
3. AI 요약 생성
   - 그룹당 2~3문장, 400자 이하  
   - 핵심 변경 파일/기능 언급  
   - 생성 시간 ≤ 10초/그룹
4. 웹 다이제스트 뷰
   - 사용자별 Accordion UI, 그룹·커밋 펼침/접힘  
   - “새로 생성” 버튼으로 실시간 갱신  
   - 시간 스탬프·버전 표시
### 부가 기능
- 다이제스트 저장 & 검색(날짜·작성자 필터)  
- 이메일 발송(HTML) / Excel 다운로드(xlsx)  
- 요약 품질 피드백(👍/👎) 수집  
- 향후: LLM 기반 코드 품질 리뷰 제안  

## 7. 비기능 요구사항
- 성능: 전체 다이제스트 생성 ≤ 30초  
- 보안: 사내 Git 접근 토큰 암호화 저장, 내부망 전용  
- 사용성: 모바일 대응, 다크 모드 지원  
- 확장성: 팀 규모 50명까지 무중단 지원  
- 호환: 최신 Chrome, Edge, Firefox  

## 8. 기술 고려사항
- 아키텍처:  
  - Backend: Python FastAPI + Celery(worker)  
  - Frontend: React(TypeScript), Ant Design  
  - AI: 사내 LLM(LLama 2) 또는 OpenAI 프록시(단, 외부 전송 불가, 수신만 허용) → LangChain 파이프라인  
- 데이터: Gerrit REST API, GitHub API(사내 인스턴스에 한함) 수집, PostgreSQL 메타데이터 저장  
- 배포: Kubernetes(on-prem), Helm chart  
- 외부 의존: Gerrit, GitHub(사내), LLM 모델, SMTP, S3(minio)  
- 네트워크: 외부 인터넷(사내망 외부) 접속 시 반드시 사내 프록시 및 사내 인증서를 사용해야 함. 사내망 내 서비스 간 통신에는 해당 제약 미적용.
## 9. 성공 지표
- 월간 활성 사용자(MAU)  
- 평균 요약 읽기 시간 < 35초  
- 리뷰 미팅 평균 길이 감소율  
- 요약 재생성 요청률(낮을수록 좋음)  
- 시스템 오류율 < 1%  

## 10. 일정·마일스톤
- Phase 1(MVP, 6주)  
  - Gerrit 연동, 클러스터링, 기본 요약, 웹 뷰  
- Phase 2(8주)  
  - 이메일/Excel 내보내기, 이력 저장·검색, 피드백 수집  
- Phase 3(12주)  
  - 코드 리뷰 추천, 프로젝트 다중 선택, 대시보드 통계  

## 11. 위험 및 대응
- LLM 품질 저하 → 프롬프트 튜닝·모델 교체 옵션 확보  
- Gerrit API 변경 → 버전 고정·롤백 스크립트  
- 요약 오·누락 → 사용자 피드백 루프·모델 재학습  
- 내부망 배포 지연 → 컨테이너 이미지 사전 캐싱  

## 12. 향후 발전
- 멀티 리포지토리(社내 GitLab 등) 통합  
- 자연어 질의형 검색 “지난달 메모리 관리 패치 보여줘”  
- 조직 전체 DevOps 지표와 연계해 통합 개발 대시보드 완성
